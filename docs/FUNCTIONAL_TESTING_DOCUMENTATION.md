# Mistakery 功能检验文档

## 文档概述

本文档为 Mistakery 错题追踪与学习优化平台的全面功能检验指南，包含所有功能模块的测试用例、验收标准和问题记录模板。

**项目信息：**

- 项目名称：Mistakery（错题追踪与学习优化平台）
- 技术栈：Vue 3 + NestJS + MySQL + Redis
- 主题色：高顿教育橙色 (#ff6e00)
- 目标用户：公务员考试考生

**文档版本：** v1.0
**最后更新：** 2026年2月

---

## 目录

1. [检验环境准备](#1-检验环境准备)
2. [认证模块功能检验](#2-认证模块功能检验)
3. [错题管理模块功能检验](#3-错题管理模块功能检验)
4. [练习模块功能检验](#4-练习模块功能检验)
5. [复习模块功能检验](#5-复习模块功能检验)
6. [统计分析模块功能检验](#6-统计分析模块功能检验)
7. [用户中心模块功能检验](#7-用户中心模块功能检验)
8. [性能检验](#8-性能检验)
9. [兼容性检验](#9-兼容性检验)
10. [安全检验](#10-安全检验)
11. [问题记录模板](#问题记录模板)

---

## 1. 检验环境准备

### 1.1 本地开发环境

#### 环境要求

| 组件    | 版本要求 | 用途           |
| ------- | -------- | -------------- |
| Node.js | 20 LTS   | 运行环境       |
| npm     | 9.0+     | 包管理器       |
| MySQL   | 8.0+     | 数据库         |
| Redis   | 7.0+     | 缓存数据库     |
| Docker  | 20.10+   | 容器化（可选） |

#### 环境变量配置

**后端 (.env)：**

```env
NODE_ENV=development
PORT=3001
DB_HOST=localhost
DB_PORT=3306
DB_USERNAME=root
DB_PASSWORD=your_password
DB_NAME=mistakery
REDIS_HOST=localhost
REDIS_PORT=6379
JWT_SECRET=your-secret-key
JWT_EXPIRES_IN=7d
```

**前端 (.env)：**

```env
VITE_API_BASE_URL=http://localhost:3001/api
VITE_APP_TITLE=错题本
```

#### 启动服务

```bash
# 方式一：Docker Compose（推荐）
docker-compose up -d

# 方式二：手动启动
# 后端
cd backend
npm install
npm run start:dev

# 前端
cd frontend
npm install
npm run dev
```

#### 验证服务状态

```bash
# 检查后端
curl http://localhost:3001/api/auth/health

# 检查前端
open http://localhost:5173

# 检查数据库
mysql -u root -p -e "USE mistakery; SHOW TABLES;"

# 检查 Redis
redis-cli ping
```

### 1.2 测试数据准备

#### 基础测试账号

| 用户名     | 密码        | 角色     | 用途         |
| ---------- | ----------- | -------- | ------------ |
| test_user  | Test123456  | 普通用户 | 功能测试     |
| admin_user | Admin123456 | 管理员   | 管理功能测试 |

#### 测试错题数据

执行种子数据脚本：

```bash
cd backend
npm run seed:mistakes
npm run seed:questions
```

---

## 2. 认证模块功能检验

### 2.1 用户注册

| 用例编号 | TC-AUTH-001  |
| -------- | ------------ |
| 测试项   | 用户注册功能 |
| 优先级   | P0（高）     |

**前置条件：**

- 用户未登录
- 访问注册页面 `/register`

**测试步骤：**

1. 打开注册页面
2. 输入有效的用户名（3-20字符）
3. 输入有效的邮箱地址
4. 输入符合要求的密码（至少6位）
5. 输入昵称（可选）
6. 点击"注册"按钮

**预期结果：**

- 表单验证通过
- 注册成功后自动登录
- 跳转到首页
- 显示注册成功提示

**反向测试用例：**

| 测试场景     | 输入           | 预期结果                 |
| ------------ | -------------- | ------------------------ |
| 用户名过短   | 2个字符        | 提示"用户名至少3个字符"  |
| 用户名过长   | 21个字符       | 提示"用户名最多20个字符" |
| 邮箱格式错误 | test@          | 提示"邮箱格式不正确"     |
| 密码过短     | 12345          | 提示"密码至少6位"        |
| 用户名已存在 | 已注册的用户名 | 提示"用户名已存在"       |
| 邮箱已存在   | 已注册的邮箱   | 提示"邮箱已存在"         |

### 2.2 用户登录

| 用例编号 | TC-AUTH-002  |
| -------- | ------------ |
| 测试项   | 用户登录功能 |
| 优先级   | P0（高）     |

**前置条件：**

- 用户已注册
- 访问登录页面 `/login`

**测试步骤：**

1. 输入用户名/邮箱
2. 输入密码
3. 点击"登录"按钮

**预期结果：**

- 登录成功
- Token 存储到 localStorage
- 跳转到首页
- Header 显示用户信息

**反向测试用例：**

| 测试场景   | 输入           | 预期结果                 |
| ---------- | -------------- | ------------------------ |
| 用户不存在 | 不存在的用户名 | 提示"用户名或密码错误"   |
| 密码错误   | 错误密码       | 提示"用户名或密码错误"   |
| 字段为空   | 留空           | 提示"请输入用户名和密码" |

### 2.3 Token 刷新

| 用例编号 | TC-AUTH-003        |
| -------- | ------------------ |
| 测试项   | JWT Token 自动刷新 |
| 优先级   | P1（中）           |

**测试步骤：**

1. 登录系统
2. 等待 Token 接近过期（或手动修改 localStorage 中的过期时间）
3. 发起 API 请求

**预期结果：**

- 自动使用 refreshToken 获取新 token
- 请求正常响应
- 用户无感知刷新

### 2.4 退出登录

| 用例编号 | TC-AUTH-004  |
| -------- | ------------ |
| 测试项   | 用户退出登录 |
| 优先级   | P0（高）     |

**测试步骤：**

1. 登录系统
2. 点击 Header 中的用户头像
3. 点击"退出登录"按钮

**预期结果：**

- localStorage 中的 token 被清除
- 跳转到登录页
- 无法访问需要认证的页面

---

## 3. 错题管理模块功能检验

### 3.1 智能解析错题录入

| 用例编号 | TC-MISTAKE-001   |
| -------- | ---------------- |
| 测试项   | 智能解析题目内容 |
| 优先级   | P0（高）         |

**前置条件：**

- 用户已登录
- 访问错题录入页面 `/mistake/entry`

**测试步骤：**

1. 选择科目（如：政治理论）
2. 选择子类别（如：马克思主义）
3. 在内容输入框中粘贴以下内容：

```
资本主义的基本矛盾是什么？
A. 生产和消费的矛盾
B. 无产阶级和资产阶级的矛盾
C. 私人劳动和社会劳动的矛盾
D. 生产社会化和生产资料资本主义私人占有之间的矛盾

我的答案：A
正确答案：D
解析：资本主义的基本矛盾是生产社会化和生产资料资本主义私人占有之间的矛盾...
```

4. 点击"解析"按钮

**预期结果：**

- 自动识别题目类型：单选题
- 自动提取题目内容
- 自动提取选项 A、B、C、D
- 自动识别正确答案：D
- 自动识别用户答案：A
- 自动提取解析内容
- 显示预览面板

**测试数据类型：**

| 题目类型 | 测试数据                           | 预期解析结果         |
| -------- | ---------------------------------- | -------------------- |
| 单选题   | 含 A-D 选项，正确答案单个          | type: 'single'       |
| 多选题   | 含 A-E 选项，正确答案多个（如 AB） | type: 'choice-multi' |
| 判断题   | 含"正确/错误"选项                  | type: 'judge'        |
| 填空题   | 含下划线或括号                     | type: 'fill'         |
| 简答题   | 无选项                             | type: 'essay'        |

### 3.2 保存错题

| 用例编号 | TC-MISTAKE-002   |
| -------- | ---------------- |
| 测试项   | 保存解析后的错题 |
| 优先级   | P0（高）         |

**测试步骤：**

1. 完成题目解析
2. 检查预览面板信息
3. 选择难度等级（简单/中等/困难）
4. 添加标签（可选）
5. 点击"保存"按钮

**预期结果：**

- 保存成功提示
- 错题列表中显示新录入的错题
- 可以继续录入下一题

**数据验证：**

| 字段     | 验证方法         |
| -------- | ---------------- |
| 题目内容 | 与输入一致       |
| 选项     | 正确提取所有选项 |
| 正确答案 | 正确识别         |
| 用户答案 | 正确识别         |
| 解析     | 与输入一致       |
| 科目     | 与选择一致       |
| 难度     | 与选择一致       |

### 3.3 错题列表查看

| 用例编号 | TC-MISTAKE-003     |
| -------- | ------------------ |
| 测试项   | 错题列表显示与筛选 |
| 优先级   | P0（高）           |

**前置条件：**

- 已录入至少5道错题
- 访问错题列表页面 `/mistake/list`

**测试步骤：**

1. 查看错题列表
2. 验证每张错题卡片显示：
   - 题目内容（摘要）
   - 科目标签
   - 题型标签
   - 难度标签
   - 收藏状态
   - 掌握程度
   - 最后复习时间
3. 测试筛选功能：
   - 按科目筛选
   - 按题型筛选
   - 按难度筛选
   - 按掌握程度筛选
   - 关键词搜索
4. 测试排序功能：
   - 按时间排序
   - 按科目排序
   - 按难度排序

**预期结果：**

- 列表显示完整
- 筛选结果正确
- 排序功能正常
- 支持分页加载

### 3.4 错题详情查看

| 用例编号 | TC-MISTAKE-004 |
| -------- | -------------- |
| 测试项   | 查看错题详情   |
| 优先级   | P1（中）       |

**测试步骤：**

1. 在错题列表中点击某道错题
2. 查看详情页

**预期结果：**

- 显示完整题目内容
- 显示所有选项
- 标注用户答案和正确答案
- 显示解析内容
- 显示知识点
- 显示统计信息（复习次数、正确次数等）
- 显示收藏状态

### 3.5 编辑错题

| 用例编号 | TC-MISTAKE-005   |
| -------- | ---------------- |
| 测试项   | 编辑已保存的错题 |
| 优先级   | P1（中）         |

**测试步骤：**

1. 在错题详情页点击"编辑"
2. 修改题目内容
3. 修改解析
4. 修改难度等级
5. 点击"保存"

**预期结果：**

- 修改成功
- 列表和详情页显示更新后的内容
- 修改时间更新

### 3.6 删除错题

| 用例编号 | TC-MISTAKE-006 |
| -------- | -------------- |
| 测试项   | 删除错题       |
| 优先级   | P1（中）       |

**测试步骤：**

1. 在错题列表点击某道题的"删除"按钮
2. 确认删除

**预期结果：**

- 显示确认对话框
- 确认后删除成功
- 列表更新
- 显示成功提示

### 3.7 批量操作

| 用例编号 | TC-MISTAKE-007 |
| -------- | -------------- |
| 测试项   | 错题批量操作   |
| 优先级   | P1（中）       |

**测试步骤：**

1. 在错题列表勾选多道错题
2. 测试批量删除
3. 测试批量添加到复习队列
4. 测试批量更新掌握程度

**预期结果：**

- 批量选择功能正常
- 批量操作成功
- 显示操作结果提示

### 3.8 收藏功能

| 用例编号 | TC-MISTAKE-008    |
| -------- | ----------------- |
| 测试项   | 错题收藏/取消收藏 |
| 优先级   | P2（低）          |

**测试步骤：**

1. 在错题列表点击收藏按钮
2. 刷新页面验证收藏状态持久化
3. 再次点击取消收藏

**预期结果：**

- 收藏图标状态切换
- 刷新后状态保持
- 可以筛选查看收藏的错题

### 3.9 错题统计

| 用例编号 | TC-MISTAKE-009 |
| -------- | -------------- |
| 测试项   | 错题统计概览   |
| 优先级   | P1（中）       |

**测试步骤：**

1. 访问错题统计页面
2. 查看统计数据

**预期结果：**

- 总错题数
- 各科目错题分布
- 各题型错题分布
- 各难度错题分布
- 掌握程度分布
- 最近7天新增错题趋势

---

## 4. 练习模块功能检验

### 4.1 智能组卷

| 用例编号 | TC-PRACTICE-001 |
| -------- | --------------- |
| 测试项   | 创建练习试卷    |
| 优先级   | P0（高）        |

**前置条件：**

- 已录入错题数据
- 访问智能组卷页面 `/practice/setup`

**测试步骤：**

1. 选择科目
2. 选择知识点（多选）
3. 选择题目类型（全部/单选/多选等）
4. 选择难度（全部/简单/中等/困难）
5. 选择来源（全部错题/仅错题/仅未掌握）
6. 设置题目数量
7. 设置是否打乱顺序
8. 设置时间限制（可选）
9. 输入练习名称
10. 点击"生成试卷"

**预期结果：**

- 显示可用题目数量
- 生成试卷成功
- 自动跳转到练习页面

**测试用例矩阵：**

| 用例     | 科目     | 题型   | 难度 | 数量 | 预期结果         |
| -------- | -------- | ------ | ---- | ---- | ---------------- |
| 基础组卷 | 政治理论 | 全部   | 全部 | 20   | 生成20题试卷     |
| 指定题型 | 政治理论 | 单选题 | 全部 | 10   | 仅包含单选       |
| 指定难度 | 政治理论 | 全部   | 中等 | 15   | 仅包含中等难度   |
| 超出数量 | 政治理论 | 全部   | 全部 | 999  | 提示最多可选数量 |

### 4.2 在线答题

| 用例编号 | TC-PRACTICE-002 |
| -------- | --------------- |
| 测试项   | 练习答题功能    |
| 优先级   | P0（高）        |

**前置条件：**

- 已创建试卷
- 在练习页面 `/practice/:id`

**测试步骤：**

1. 查看当前题目
2. 选择/输入答案
3. 切换到下一题
4. 继续答题5-10题
5. 查看答题卡

**预期结果：**

- 题目显示完整
- 答案自动保存
- 切换题目流畅
- 答题卡显示正确：
  - 已答题目标记
  - 当前题目高亮
  - 未答题目灰色

### 4.3 答题辅助功能

| 用例编号 | TC-PRACTICE-003 |
| -------- | --------------- |
| 测试项   | 答题辅助工具    |
| 优先级   | P1（中）        |

**测试功能清单：**

| 功能     | 测试步骤                                      | 预期结果             |
| -------- | --------------------------------------------- | -------------------- |
| 计时器   | 开始练习，观察计时器                          | 正确显示已用时间     |
| 画笔功能 | 开启画笔，在题目上标记                        | 画笔功能正常，可清除 |
| 草稿功能 | 打开草稿面板                                  | 可以输入草稿内容     |
| 计算器   | 打开计算器                                    | 基础计算功能正常     |
| 快捷键   | 使用键盘快捷键（1/2/3/4选答案，←→切换题目） | 快捷键响应正确       |
| 收藏题目 | 点击收藏按钮                                  | 收藏状态保存         |

### 4.4 提交答案

| 用例编号 | TC-PRACTICE-004 |
| -------- | --------------- |
| 测试项   | 单题答案提交    |
| 优先级   | P0（高）        |

**测试步骤：**

1. 选择答案
2. 切换到下一题
3. 验证答案已保存

**预期结果：**

- 答案自动保存
- 答题卡状态更新
- 返回上一题答案保留

### 4.5 交卷

| 用例编号 | TC-PRACTICE-005 |
| -------- | --------------- |
| 测试项   | 练习交卷        |
| 优先级   | P0（高）        |

**测试场景：**

| 场景     | 测试步骤                 | 预期结果                     |
| -------- | ------------------------ | ---------------------------- |
| 正常交卷 | 答完所有题目，点击"交卷" | 弹出确认对话框，确认后提交   |
| 部分答题 | 答部分题目，点击"交卷"   | 提示未答题目数量，确认后提交 |
| 时间到   | 设置时间限制，等待超时   | 自动交卷，显示超时提示       |

### 4.6 练习结果查看

| 用例编号 | TC-PRACTICE-006 |
| -------- | --------------- |
| 测试项   | 查看练习结果    |
| 优先级   | P0（高）        |

**前置条件：**

- 已完成练习并交卷

**测试步骤：**

1. 查看结果概览页

**预期结果：**

- 总分
- 正确率
- 用时
- 正确/错误/未答数量
- 题目正确率趋势图
- 科目正确率分布
- 答题卡（标注正误）

### 4.7 答案解析

| 用例编号 | TC-PRACTICE-007  |
| -------- | ---------------- |
| 测试项   | 查看详细答案解析 |
| 优先级   | P0（高）         |

**测试步骤：**

1. 在结果页点击某道题
2. 查看答案解析页

**预期结果：**

- 显示题目内容
- 显示用户答案和正确答案
- 显示答案解析
- 显示知识点
- 可添加笔记
- 可收藏题目
- 可添加到错题本

### 4.8 练习记录管理

| 用例编号 | TC-PRACTICE-008 |
| -------- | --------------- |
| 测试项   | 练习记录管理    |
| 优先级   | P1（中）        |

**测试步骤：**

1. 访问练习记录列表
2. 查看历史记录
3. 点击某条记录查看详情
4. 删除某条记录

**预期结果：**

- 记录列表显示完整
- 详情页可重看答案解析
- 删除功能正常

---

## 5. 复习模块功能检验

### 5.1 Leitner 复习系统

| 用例编号 | TC-REVIEW-001        |
| -------- | -------------------- |
| 测试项   | Leitner 间隔重复系统 |
| 优先级   | P0（高）             |

**复习间隔验证：**

| 当前箱子等级 | 答对后       | 答错后      |
| ------------ | ------------ | ----------- |
| Box 1 (1天)  | Box 2 (3天)  | Box 1 (1天) |
| Box 2 (3天)  | Box 3 (7天)  | Box 1 (1天) |
| Box 3 (7天)  | Box 4 (14天) | Box 1 (1天) |
| Box 4 (14天) | Box 5 (30天) | Box 1 (1天) |
| Box 5 (30天) | Box 5 (30天) | Box 1 (1天) |

**测试步骤：**

1. 添加错题到复习队列
2. 等待/手动设置复习时间到期
3. 访问复习页面 `/review`
4. 查看待复习题目列表
5. 开始复习
6. 答题并提交结果（正确/错误）
7. 验证下次复习时间计算

**预期结果：**

- 仅显示到期待复习的错题
- 按箱子等级分组显示
- 复习结果正确更新箱子等级
- 下次复习时间计算正确

### 5.2 添加到复习队列

| 用例编号 | TC-REVIEW-002  |
| -------- | -------------- |
| 测试项   | 添加错题到复习 |
| 优先级   | P0（高）       |

**测试步骤：**

1. 在错题本选择错题
2. 点击"添加到复习"
3. 验证复习列表

**预期结果：**

- 添加成功
- 默认放入 Box 1
- 下次复习时间设置为明天

### 5.3 复习会话

| 用例编号 | TC-REVIEW-003 |
| -------- | ------------- |
| 测试项   | 复习会话流程  |
| 优先级   | P0（高）      |

**测试步骤：**

1. 访问复习页面
2. 点击"开始复习"
3. 答题
4. 选择反馈（需要复习/困难/一般/简单）
5. 继续下一题
6. 完成复习

**预期结果：**

- 显示题目
- 选择答案后显示正误
- 反馈选择正确更新下次复习时间
- 显示复习进度
- 完成后显示复习统计

### 5.4 复习统计

| 用例编号 | TC-REVIEW-004 |
| -------- | ------------- |
| 测试项   | 复习统计数据  |
| 优先级   | P1（中）      |

**测试步骤：**

1. 访问复习统计页面
2. 查看统计数据

**预期结果：**

- 总复习次数
- 累计复习题目数
- 今日复习数量
- 各箱子题目分布
- 复习正确率趋势
- 未来复习负荷预测

### 5.5 跳过复习

| 用例编号 | TC-REVIEW-005 |
| -------- | ------------- |
| 测试项   | 跳过复习题目  |
| 优先级   | P2（低）      |

**测试步骤：**

1. 在复习过程中点击"跳过"
2. 验证题目状态

**预期结果：**

- 题目移出当前复习队列
- 复习时间不更新
- 下次复习时间保持不变

---

## 6. 统计分析模块功能检验

### 6.1 学习概览统计

| 用例编号 | TC-ANALYTICS-001 |
| -------- | ---------------- |
| 测试项   | 学习数据概览     |
| 优先级   | P0（高）         |

**前置条件：**

- 已有练习和错题数据
- 访问统计页面 `/statistics`

**测试步骤：**

1. 查看概览卡片

**预期验证：**

| 指标         | 验证方法           |
| ------------ | ------------------ |
| 总错题数     | 与错题本总数一致   |
| 总练习次数   | 与练习记录数一致   |
| 总答题数     | 累计所有练习题目数 |
| 平均正确率   | 计算正确           |
| 累计学习时长 | 时间统计合理       |
| 连续学习天数 | 根据练习日期计算   |

### 6.2 科目统计分析

| 用例编号 | TC-ANALYTICS-002 |
| -------- | ---------------- |
| 测试项   | 科目维度统计     |
| 优先级   | P0（高）         |

**测试步骤：**

1. 查看科目统计图表
2. 切换不同科目
3. 验证数据准确性

**预期结果：**

- 各科目错题数分布
- 各科目正确率对比
- 各科目学习时长占比
- 各科目知识点掌握度

### 6.3 学习趋势分析

| 用例编号 | TC-ANALYTICS-003 |
| -------- | ---------------- |
| 测试项   | 学习数据趋势     |
| 优先级   | P1（中）         |

**测试步骤：**

1. 切换时间范围（周/月/季/年）
2. 查看趋势图

**预期结果：**

- 每日新增错题趋势
- 每日练习正确率趋势
- 每日学习时长趋势
- 累计掌握度变化

### 6.4 知识点分析

| 用例编号 | TC-ANALYTICS-004 |
| -------- | ---------------- |
| 测试项   | 知识点掌握分析   |
| 优先级   | P1（中）         |

**测试步骤：**

1. 选择科目
2. 查看知识点树
3. 查看各知识点统计

**预期结果：**

- 知识点层级结构
- 各知识点错题数
- 各知识点正确率
- 各知识点掌握度
- 可点击筛选

### 6.5 学习建议

| 用例编号 | TC-ANALYTICS-005 |
| -------- | ---------------- |
| 测试项   | 智能学习建议     |
| 优先级   | P2（低）         |

**测试步骤：**

1. 查看学习建议面板

**预期建议类型：**

| 建议类型   | 触发条件              |
| ---------- | --------------------- |
| 薄弱知识点 | 某知识点正确率低于60% |
| 复习提醒   | 有待复习的错题        |
| 练习建议   | 长时间未练习          |
| 进步鼓励   | 正确率提升            |

### 6.6 导出功能

| 用例编号 | TC-ANALYTICS-006 |
| -------- | ---------------- |
| 测试项   | 统计数据导出     |
| 优先级   | P2（低）         |

**测试步骤：**

1. 选择导出格式（PDF/Excel）
2. 选择时间范围
3. 点击导出

**预期结果：**

- 文件下载成功
- 数据完整
- 格式正确

---

## 7. 用户中心模块功能检验

### 7.1 个人资料管理

| 用例编号 | TC-USER-001        |
| -------- | ------------------ |
| 测试项   | 查看和编辑个人资料 |
| 优先级   | P1（中）           |

**测试步骤：**

1. 访问个人中心 `/user`
2. 查看个人信息
3. 点击"编辑资料"
4. 修改昵称
5. 修改目标考试
6. 保存

**预期结果：**

- 信息显示完整
- 修改成功
- 数据持久化

### 7.2 头像上传

| 用例编号 | TC-USER-002  |
| -------- | ------------ |
| 测试项   | 上传用户头像 |
| 优先级   | P2（低）     |

**测试步骤：**

1. 点击头像上传
2. 选择图片文件（JPG/PNG，<2MB）
3. 裁剪图片
4. 保存

**预期结果：**

- 上传成功
- 图片显示正常
- 支持预览

**反向测试：**

| 文件类型 | 文件大小 | 预期结果       |
| -------- | -------- | -------------- |
| .gif     | 500KB    | 提示格式不支持 |
| .jpg     | 5MB      | 提示文件过大   |
| .exe     | 100KB    | 提示格式不支持 |

### 7.3 用户设置

| 用例编号 | TC-USER-003  |
| -------- | ------------ |
| 测试项   | 用户偏好设置 |
| 优先级   | P1（中）     |

**测试功能清单：**

| 设置项         | 可选值    | 验证方法           |
| -------------- | --------- | ------------------ |
| 主题           | 浅色/深色 | 切换后主题生效     |
| 字体大小       | 小/中/大  | 字体大小变化       |
| 自动跳转下一题 | 开/关     | 练习时行为符合设置 |
| 默认展开答题卡 | 开/关     | 练习时符合设置     |
| 通知开关       | 开/关     | 通知状态变化       |

### 7.4 学习记录

| 用例编号 | TC-USER-004  |
| -------- | ------------ |
| 测试项   | 查看学习历史 |
| 优先级   | P1（中）     |

**测试步骤：**

1. 访问学习记录页面 `/user/history`
2. 查看时间线

**预期结果：**

- 按时间倒序显示
- 显示操作类型（录入/练习/复习）
- 显示关联数据
- 支持筛选查看

---

## 8. 性能检验

### 8.1 前端性能

| 用例编号 | TC-PERF-001  |
| -------- | ------------ |
| 测试项   | 前端性能指标 |
| 优先级   | P1（中）     |

**测试方法：**

- Chrome DevTools Lighthouse
- Network 面板监控

**验收标准：**

| 指标                      | 目标值 |
| ------------------------- | ------ |
| 首次内容绘制 (FCP)        | <1.5s  |
| 最大内容绘制 (LCP)        | <2.5s  |
| 首次输入延迟 (FID)        | <100ms |
| 累积布局偏移 (CLS)        | <0.1   |
| Time to Interactive (TTI) | <3s    |

### 8.2 后端性能

| 用例编号 | TC-PERF-002  |
| -------- | ------------ |
| 测试项   | API 响应时间 |
| 优先级   | P1（中）     |

**测试方法：**

```bash
# 使用 Apache Bench
ab -n 1000 -c 10 http://localhost:3001/api/mistake

# 或使用 wrk
wrk -t4 -c100 -d30s http://localhost:3001/api/mistake
```

**验收标准：**

| API 端点     | P95 响应时间 |
| ------------ | ------------ |
| 获取错题列表 | <200ms       |
| 获取错题详情 | <100ms       |
| 保存错题     | <300ms       |
| 获取统计数据 | <500ms       |
| 创建练习试卷 | <1s          |

### 8.3 数据库性能

| 用例编号 | TC-PERF-003    |
| -------- | -------------- |
| 测试项   | 数据库查询性能 |
| 优先级   | P1（中）       |

**测试方法：**

- EXPLAIN 分析慢查询
- 查看查询日志

**验收标准：**

- 无全表扫描
- 索引使用率 >95%
- 慢查询数量 = 0

### 8.4 并发测试

| 用例编号 | TC-PERF-004  |
| -------- | ------------ |
| 测试项   | 系统并发能力 |
| 优先级   | P2（低）     |

**测试场景：**

- 100并发用户同时答题
- 50并发用户同时录入错题

**验收标准：**

- 无崩溃
- 响应时间增长 <50%
- 错误率 <1%

---

## 9. 兼容性检验

### 9.1 浏览器兼容性

| 用例编号 | TC-COMP-001  |
| -------- | ------------ |
| 测试项   | 浏览器兼容性 |
| 优先级   | P1（中）     |

**测试矩阵：**

| 浏览器        | 版本        | 测试重点             |
| ------------- | ----------- | -------------------- |
| Chrome        | 最新版      | 完整功能测试         |
| Edge          | 最新版      | 完整功能测试         |
| Firefox       | 最新版      | 完整功能测试         |
| Safari        | 最新版      | 重点测试画笔、定时器 |
| Mobile Safari | iOS 14+     | 响应式布局、触摸操作 |
| Chrome Mobile | Android 10+ | 响应式布局、触摸操作 |

### 9.2 分辨率兼容性

| 用例编号 | TC-COMP-002 |
| -------- | ----------- |
| 测试项   | 响应式布局  |
| 优先级   | P1（中）    |

**测试分辨率：**

| 设备类型 | 分辨率     | 验证要点           |
| -------- | ---------- | ------------------ |
| 手机     | 375×667   | 单列布局、汉堡菜单 |
| 手机横屏 | 667×375   | 布局正常、可用     |
| 平板     | 768×1024  | 两列布局           |
| 平板横屏 | 1024×768  | 完整布局           |
| 桌面     | 1920×1080 | 完整布局           |
| 高分屏   | 2560×1440 | 清晰度正常         |

### 9.3 网络环境兼容性

| 用例编号 | TC-COMP-003  |
| -------- | ------------ |
| 测试项   | 网络环境适配 |
| 优先级   | P2（低）     |

**测试场景：**

| 网络环境 | 模拟方法                           | 验证要点                 |
| -------- | ---------------------------------- | ------------------------ |
| 4G       | Chrome DevTools Network Fast4G     | 功能正常                 |
| 3G       | Chrome DevTools Network Regular 3G | 可用，但有明显延迟       |
| 弱网     | Chrome DevTools Network Offline    | 离线提示，恢复后自动重试 |

---

## 10. 安全检验

### 10.1 认证安全

| 用例编号 | TC-SEC-001   |
| -------- | ------------ |
| 测试项   | 认证机制安全 |
| 优先级   | P0（高）     |

**测试用例：**

| 测试项       | 测试方法                                      | 预期结果                 |
| ------------ | --------------------------------------------- | ------------------------ |
| 密码加密     | 查看数据库                                    | 密码以 hash 存储         |
| Token 过期   | 修改 Token 时间                               | 过期后自动刷新或跳转登录 |
| 路由保护     | 未登录访问受保护页面                          | 重定向到登录页           |
| SQL 注入防护 | 用户名输入 ' OR '1'='1                        | 正常处理，不报错         |
| XSS 防护     | 题目内容输入`<script>`alert(1)`</script>` | 内容被转义               |

### 10.2 权限控制

| 用例编号 | TC-SEC-002   |
| -------- | ------------ |
| 测试项   | 用户权限隔离 |
| 优先级   | P0（高）     |

**测试用例：**

| 测试项   | 测试方法               | 预期结果     |
| -------- | ---------------------- | ------------ |
| 数据隔离 | 用户A访问用户B的错题ID | 返回403或404 |
| API 保护 | 无 Token 调用 API      | 返回401      |
| 跨站操作 | 修改其他用户的资源     | 返回403      |

### 10.3 输入验证

| 用例编号 | TC-SEC-003   |
| -------- | ------------ |
| 测试项   | 输入数据验证 |
| 优先级   | P1（中）     |

**测试用例：**

| 输入字段 | 测试数据                          | 预期结果             |
| -------- | --------------------------------- | -------------------- |
| 用户名   | `<script>`alert(1)`</script>` | 拒绝，提示格式错误   |
| 邮箱     | test@test                         | 拒绝，提示格式错误   |
| 题目内容 | 10000字符                         | 限制长度或提示       |
| 文件上传 | .exe 文件                         | 拒绝，提示格式不支持 |

### 10.4 敏感信息保护

| 用例编号 | TC-SEC-004   |
| -------- | ------------ |
| 测试项   | 敏感信息保护 |
| 优先级   | P1（中）     |

**验证清单：**

- 密码不在响应中返回
- Token 不在 URL 中暴露
- 错误信息不泄露系统信息
- 日志不记录敏感数据

---

## 11. 问题记录模板

### 缺陷报告模板

```markdown
## 缺陷标题
[模块名称] 简要描述缺陷内容

### 基本信息
| 字段 | 内容 |
|------|------|
| 缺陷编号 | BUG-YYYYMMDD-序号 |
| 发现日期 | YYYY-MM-DD |
| 发现人 | 姓名 |
| 严重程度 | P0(致命)/P1(严重)/P2(一般)/P3(轻微) |
| 优先级 | P0(高)/P1(中)/P2(低) |
| 缺陷类型 | 功能/UI/性能/安全/兼容性 |
| 所属模块 | 模块名称 |

### 环境信息
- 浏览器：
- 操作系统：
- 设备类型：
- 网络环境：

### 复现步骤
1. 步骤一
2. 步骤二
3. 步骤三

### 实际结果
描述实际发生的现象

### 预期结果
描述应该出现的正确结果

### 附件
- 截图：
- 录屏：
- 日志：

### 备注
其他补充信息
```

### 测试记录模板

```markdown
## 测试执行记录

### 测试基本信息
| 字段 | 内容 |
|------|------|
| 测试日期 | YYYY-MM-DD |
| 测试人员 | 姓名 |
| 测试版本 | v1.x.x |
| 测试环境 | 开发/测试/预发布 |

### 测试执行统计

| 模块 | 用例总数 | 通过数 | 失败数 | 阻塞数 | 通过率 |
|------|---------|--------|--------|--------|--------|
| 认证模块 | 4 | 4 | 0 | 0 | 100% |
| 错题管理 | 9 | 8 | 1 | 0 | 89% |
| 练习模块 | 8 | 7 | 1 | 0 | 88% |
| 复习模块 | 5 | 5 | 0 | 0 | 100% |
| 统计分析 | 6 | 6 | 0 | 0 | 100% |
| 用户中心 | 4 | 4 | 0 | 0 | 100% |
| **总计** | **36** | **34** | **2** | **0** | **94%** |

### 失败用例详情

| 用例编号 | 用例名称 | 失败原因 | 严重程度 | 负责人 |
|---------|---------|---------|---------|--------|
| TC-MISTAKE-005 | 编辑错题 | 保存后内容未更新 | P1 | 张三 |

### 遗留问题
1. [问题描述]
2. [问题描述]

### 测试结论
- [ ] 通过，可以发布
- [ ] 有问题，需要修复后回归
```

---

## 附录

### A. 快捷键列表

| 快捷键  | 功能            | 适用页面 |
| ------- | --------------- | -------- |
| 1/2/3/4 | 选择A/B/C/D答案 | 练习页面 |
| ← / → | 上一题/下一题   | 练习页面 |
| Enter   | 确认/提交       | 全局     |
| Alt + C | 打开/关闭答题卡 | 练习页面 |
| Alt + S | 提交试卷        | 练习页面 |
| Alt + D | 打开/关闭画笔   | 练习页面 |
| Space   | 暂停/继续计时   | 练习页面 |
| Escape  | 关闭弹窗        | 全局     |

### B. API 响应码规范

| 状态码 | 含义       | 使用场景         |
| ------ | ---------- | ---------------- |
| 200    | 成功       | 请求成功         |
| 400    | 请求错误   | 参数验证失败     |
| 401    | 未授权     | Token 无效或过期 |
| 403    | 禁止访问   | 无权限           |
| 404    | 未找到     | 资源不存在       |
| 429    | 请求过多   | 触发限流         |
| 500    | 服务器错误 | 系统内部错误     |

### C. 错误码列表

| 错误码       | 描述         | 解决方案       |
| ------------ | ------------ | -------------- |
| AUTH_001     | Token 无效   | 重新登录       |
| AUTH_002     | Token 过期   | 刷新 Token     |
| MISTAKE_001  | 题目格式错误 | 检查输入格式   |
| PRACTICE_001 | 试卷不存在   | 检查试卷 ID    |
| REVIEW_001   | 无待复习题目 | 等待或添加错题 |

---

**文档结束**

**变更历史：**

| 版本 | 日期       | 修改人 | 修改内容 |
| ---- | ---------- | ------ | -------- |
| v1.0 | 2026-02-14 | Claude | 初始版本 |
