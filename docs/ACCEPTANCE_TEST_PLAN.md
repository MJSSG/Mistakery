# Mistakery 验收测试计划

本文档定义了 Mistakery 项目的验收标准和测试计划。

## 目录

- [验收标准](#验收标准)
- [功能测试](#功能测试)
- [性能测试](#性能测试)
- [安全测试](#安全测试)
- [兼容性测试](#兼容性测试)
- [用户验收测试](#用户验收测试)

---

## 验收标准

### 总体标准

| 类别 | 标准 | 目标值 |
|------|------|--------|
| 功能完整性 | 核心功能实现率 | 100% |
| 代码质量 | 测试覆盖率 | ≥85% |
| 性能 | API响应时间 (95%) | <200ms |
| 性能 | 页面首次绘制 | <1.5s |
| 性能 | 首次内容绘制 | <0.8s |
| 可用性 | 系统正常运行时间 | ≥99.9% |
| 并发 | 并发用户数 | ≥1000 |
| 安全 | 高危漏洞 | 0 |

### P0 核心功能验收

- [x] 错题录入与解析
- [x] 智能组卷
- [x] 在线答题
- [x] 结果分析
- [x] 错题本管理
- [x] 用户认证
- [x] 复习系统

### P1 重要功能验收

- [x] 学习统计与可视化
- [x] 个人中心管理
- [x] 数据导出（PDF/Excel）

---

## 功能测试

### 1. 用户认证模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 用户注册 - 正常流程 | 注册成功，自动登录 | ✅ |
| 用户注册 - 重复用户名 | 提示用户名已存在 | ✅ |
| 用户注册 - 密码强度弱 | 提示密码强度不足 | ✅ |
| 用户登录 - 正确凭证 | 登录成功，获取Token | ✅ |
| 用户登录 - 错误密码 | 提示密码错误 | ✅ |
| Token刷新 - 有效Token | 返回新Token | ✅ |
| Token刷新 - 过期Token | 返回401未授权 | ✅ |
| 退出登录 - 清除Session | 退出成功，跳转登录页 | ✅ |

### 2. 错题管理模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 创建错题 - 单选题 | 自动解析题目内容 | ✅ |
| 创建错题 - 多选题 | 正确识别多选答案 | ✅ |
| 创建错题 - 判断题 | 正确识别判断题 | ✅ |
| 创建错题 - 重复题目 | 提示题目已存在 | ✅ |
| 编辑错题 - 修改内容 | 保存成功 | ✅ |
| 删除错题 - 单个删除 | 删除成功 | ✅ |
| 批量删除 - 选中多个 | 批量删除成功 | ✅ |
| 错题收藏 - 添加收藏 | 收藏成功 | ✅ |
| 错题搜索 - 关键词搜索 | 返回匹配结果 | ✅ |
| 错题筛选 - 多条件筛选 | 返回筛选结果 | ✅ |
| 错题分页 - 翻页加载 | 正确显示页码 | ✅ |

### 3. 练习模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 创建练习 - 随机模式 | 随机生成试卷 | ✅ |
| 创建练习 - 薄弱模式 | 优先错误率高题目 | ✅ |
| 创建练习 - 指定条件 | 按条件生成试卷 | ✅ |
| 开始练习 - 计时开始 | 计时器正常工作 | ✅ |
| 答题 - 选择选项 | 选项高亮显示 | ✅ |
| 答题 - 上一题/下一题 | 正确切换题目 | ✅ |
| 答题 - 答题卡跳转 | 跳转到指定题目 | ✅ |
| 答题 - 快捷键选择 | 快捷键正确响应 | ✅ |
| 暂停练习 - 暂停计时 | 计时器暂停 | ✅ |
| 继续练习 - 恢复计时 | 计时器继续 | ✅ |
| 提交试卷 - 计算结果 | 正确计算成绩 | ✅ |
| 查看解析 - 显示解析 | 正确显示答案解析 | ✅ |

### 4. 复习模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 查看待复习 - 今日待复习 | 显示今日待复习列表 | ✅ |
| 开始复习 - 进入复习模式 | 进入复习界面 | ✅ |
| 复习反馈 - Again | 重新加入待复习队列 | ✅ |
| 复习反馈 - Hard | 延短下次复习间隔 | ✅ |
| 复习反馈 - Good | 按计划安排复习 | ✅ |
| 复习反馈 - Easy | 延长下次复习间隔 | ✅ |
| Leitner箱子 - 查看分布 | 显示各箱子题目数 | ✅ |
| 跳过复习 - 移除本次 | 移出待复习队列 | ✅ |

### 5. 统计模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 概览统计 - 今日数据 | 显示今日统计数据 | ✅ |
| 概览统计 - 本周数据 | 显示本周统计数据 | ✅ |
| 趋势图表 - 学习时长 | 正确渲染折线图 | ✅ |
| 科目统计 - 掌握度 | 正确渲染柱状图 | ✅ |
| 饼图 - 错题分布 | 正确渲染饼图 | ✅ |
| 导出数据 - PDF格式 | 生成PDF文件 | ✅ |
| 导出数据 - Excel格式 | 生成Excel文件 | ✅ |

### 6. 个人中心模块

| 测试用例 | 预期结果 | 状态 |
|----------|----------|------|
| 修改资料 - 昵称 | 保存成功 | ✅ |
| 修改资料 - 头像上传 | 上传成功并显示 | ✅ |
| 修改密码 - 正确旧密码 | 修改成功 | ✅ |
| 修改密码 - 错误旧密码 | 提示密码错误 | ✅ |
| 主题设置 - 浅色主题 | 应用浅色主题 | ✅ |
| 主题设置 - 深色主题 | 应用深色主题 | ✅ |
| 字体大小 - 调整大小 | 字体正确缩放 | ✅ |
| 历史记录 - 练习历史 | 显示练习记录列表 | ✅ |

---

## 性能测试

### 1. API 响应时间测试

| 接口 | 目标值 | 实际值 | 状态 |
|------|--------|--------|------|
| POST /api/auth/login | <500ms | - | ⏳ |
| GET /api/mistake | <200ms | - | ⏳ |
| POST /api/mistake | <300ms | - | ⏳ |
| POST /api/practice/exam | <500ms | - | ⏳ |
| POST /api/practice/exam/:id/answer | <200ms | - | ⏳ |
| GET /api/analytics/overview | <300ms | - | ⏳ |
| GET /api/review/due | <200ms | - | ⏳ |

### 2. 页面加载性能测试

| 页面 | FCP | LCP | TTI | 状态 |
|------|-----|-----|-----|------|
| 首页 | <0.8s | <1.5s | <2.5s | ⏳ |
| 错题录入 | <0.8s | <1.5s | <2.5s | ⏳ |
| 练习页面 | <0.8s | <1.5s | <2.5s | ⏳ |
| 统计页面 | <1.0s | <2.0s | <3.0s | ⏳ |

### 3. 并发压力测试

| 场景 | 并发数 | 成功率 | 平均响应时间 | 状态 |
|------|--------|--------|--------------|------|
| 登录 | 100 | >99% | <500ms | ⏳ |
| 错题录入 | 50 | >99% | <300ms | ⏳ |
| 智能组卷 | 30 | >99% | <500ms | ⏳ |
| 在线答题 | 200 | >99% | <200ms | ⏳ |
| 查看统计 | 100 | >99% | <300ms | ⏳ |
| 混合场景 | 1000 | >95% | <500ms | ⏳ |

### 4. 负载测试工具配置

```yaml
# k6 配置示例
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '1m', target: 100 },   // 1分钟内爬升到100用户
    { duration: '3m', target: 100 },   // 保持100用户3分钟
    { duration: '1m', target: 500 },   // 爬升到500用户
    { duration: '3m', target: 500 },   // 保持500用户3分钟
    { duration: '1m', target: 0 },     // 爬降到0
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'],  // 95%请求<500ms
    http_req_failed: ['rate<0.01'],    // 错误率<1%
  },
};

export default function() {
  let res = http.post('http://localhost:3001/api/auth/login', {
    username: 'test',
    password: 'test123',
  });
  check(res, { 'status was 200': (r) => r.status == 200 });
  sleep(1);
}
```

---

## 安全测试

### 1. 认证安全

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| SQL注入 | 输入SQL注入语句 | 被拦截或无效 | ⏳ |
| XSS攻击 | 输入XSS脚本 | 被转义或过滤 | ⏳ |
| CSRF攻击 | 跨站请求伪造 | 被CSRF令牌拦截 | ⏳ |
| 暴力破解 | 多次错误登录 | 账户被锁定 | ⏳ |
| 会话劫持 | 尝试使用过期Token | 返回401 | ⏳ |

### 2. 数据安全

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 密码存储 | 检查数据库 | 密码哈希存储 | ⏳ |
| 敏感数据 | 检查API响应 | 不返回密码等敏感信息 | ⏳ |
| HTTPS通信 | 检查数据传输 | 使用HTTPS加密 | ⏳ |
| 文件上传 | 上传恶意文件 | 文件类型被验证 | ⏳ |

### 3. 权限控制

| 测试项 | 测试方法 | 预期结果 | 状态 |
|--------|----------|----------|------|
| 路由保护 | 未登录访问受保护路由 | 重定向到登录页 | ⏳ |
| 数据隔离 | 用户A访问用户B数据 | 返回403 | ⏳ |
| 操作权限 | 普通用户执行管理员操作 | 返回403 | ⏳ |

---

## 兼容性测试

### 1. 浏览器兼容性

| 浏览器 | 版本 | 状态 |
|--------|------|------|
| Chrome | 90+ | ✅ |
| Edge | 90+ | ✅ |
| Firefox | 88+ | ✅ |
| Safari | 14+ | ⏳ |
| Opera | 76+ | ⏳ |

### 2. 设备兼容性

| 设备类型 | 分辨率 | 状态 |
|----------|--------|------|
| PC | 1920x1080 | ✅ |
| PC | 1366x768 | ✅ |
| Tablet | 768x1024 | ⏳ |
| Mobile | 375x667 | ⏳ |

### 3. 操作系统兼容性

| 操作系统 | 版本 | 状态 |
|----------|------|------|
| Windows | 10/11 | ✅ |
| macOS | 11+ | ✅ |
| Linux | Ubuntu 20.04+ | ✅ |
| iOS | 14+ | ⏳ |
| Android | 10+ | ⏳ |

---

## 用户验收测试

### UAT 测试场景

#### 场景1：新用户首次使用

1. 用户注册账号
2. 完成个人信息设置
3. 学习如何录入错题
4. 录入第一道错题
5. 创建第一次练习
6. 完成练习并查看结果
7. 查看学习统计

**验收标准**：新用户能在30分钟内独立完成上述流程

#### 场景2：日常学习流程

1. 录入当日错题
2. 查看待复习题目
3. 完成复习任务
4. 创建针对性练习
5. 查看学习进度

**验收标准**：日常操作流程顺畅，无明显卡顿

#### 场景3：考试前集中复习

1. 筛选特定科目错题
2. 创建高难度练习
3. 完成模拟考试
4. 查看错误分析
5. 导出复习资料

**验收标准**：能高效完成考前复习准备

### UAT 反馈表

| 功能 | 易用性 | 功能完整性 | 性能 | 建议 |
|------|--------|------------|------|------|
| 错题录入 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | - |
| 智能组卷 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | - |
| 在线答题 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | - |
| 复习系统 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | - |
| 学习统计 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | - |

---

## 验收流程

### 1. 内部验收

- [ ] 开发团队自测
- [ ] QA团队全面测试
- [ ] 修复发现的问题
- [ ] 回归测试验证

### 2. 用户验收

- [ ] 邀请种子用户测试
- [ ] 收集用户反馈
- [ ] 优化用户体验
- [ ] 准备发布版本

### 3. 上线准备

- [ ] 生产环境部署
- [ ] 数据库迁移
- [ ] 监控配置
- [ ] 备份验证

---

## 验收报告模板

```markdown
# Mistakery v1.0 验收报告

## 验收信息
- 验收日期：YYYY-MM-DD
- 验收人员：
- 验收环境：

## 功能验收
- P0核心功能：[通过/不通过]
- P1重要功能：[通过/不通过]
- P2增值功能：[通过/不通过]

## 性能验收
- API响应时间：[达标/未达标]
- 页面加载时间：[达标/未达标]
- 并发支持：[达标/未达标]

## 安全验收
- 漏洞扫描：[通过/不通过]
- 渗透测试：[通过/不通过]

## 问题清单
| 问题 | 严重程度 | 状态 |
|------|----------|------|
| ... | ... | ... |

## 验收结论
- [ ] 通过验收，准予发布
- [ ] 条件通过，需修复后验证
- [ ] 不通过，需整改后重新验收

## 签字确认
- 产品负责人：
- 技术负责人：
- 测试负责人：
```

---

**文档版本：v1.0**
**最后更新：2026年2月**
